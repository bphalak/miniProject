package dao;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;

import mode.Book;

public class BookSearchDAO {
	Connection connection;
	String bookName;
	PreparedStatement preparedStatement;
	ResultSet resultSet;
	Book book;
	
	public BookSearchDAO(Connection connection, String bookName) {
		
		this.connection = connection;
		this.bookName = bookName.toLowerCase();
		
	}
	public Book searchName() throws SQLException {
		
			preparedStatement = connection.prepareStatement("Select * from def_books natural join def_master where title like '?%'");
			preparedStatement.setString(1, bookName);
			
			resultSet = preparedStatement.executeQuery();
			
			return new Book(Integer.parseInt(resultSet.getInt("bookid"),
					resultSet.getString("title"), 
					resultSet.getString("author"),
					Integer.parseInt(resultSet.getInt("genre"),
							Integer.parseInt(resultSet.getInt("status"),
									resultSet.getString("creationDate"), 
						Integer.parseInt(resultSet.getInt("createdBy"),
								resultSet.getString("modificationDate"), 
						Integer.parseInt(resultSet.getInt("modifiedBy"),
								resultSet.getString("description"));
			
			
			
			
		
	}
	

}
